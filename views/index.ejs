<!DOCTYPE html>
<html>
  <head>
    <title>Chip In</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href="/stylesheets/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-2.0.2.min.js"></script>
    <script src="https://checkout.stripe.com/checkout.js"></script>
    <script src="https://js.stripe.com/v2/"></script>
    <script>

        window.onload = function(){
        //DOM Tree script
        (function(){

            var supports3DTransforms =  document.body.style['perspectiveProperty'] !== undefined ||
                    document.body.style['WebkitPerspective'] !== undefined ||
                    document.body.style['MozPerspective'] !== undefined ||
                    document.body.style['msPerspective'] !== undefined ||
                    document.body.style['OPerspective'] !== undefined;

            if( !supports3DTransforms ) {
                alert( 'Your browser doesn\'t support CSS3 3D transforms :/' );
            }

            function transform( element, value ) {
                element.style.WebkitTransform = value;
                element.style.MozTransform = value;
                element.style.msTransform = value;
                element.style.OTransform = value;
                element.style.transform = value;
            }

            var width = 450,
                    height = 500,
                    quantity = 300,
                    types = [ 'text' ],
                    greetings = [ '' ];

            var tree = document.querySelector( '.tree' ),
                    treeRotation = 0;

            tree.style.width = width + 'px';
            tree.style.height = height + 'px';

            window.addEventListener( 'resize', resize, false );

            // The tree
            for( var i = 0; i < quantity; i++ ) {
                var element = null,
                        type = types[ Math.floor( Math.random() * types.length ) ],
                        greeting = greetings[ Math.floor( Math.random() * greetings.length ) ];

                var x = width/2,
                        y = Math.round( Math.random() * height );

                var rx = 0,
                        ry = Math.random() * 360,
                        rz = -Math.random() * 15;

                var elemenWidth = 5 + ( ( y / height ) * width / 2 ),
                        elemenHeight = 10;

                switch( type ) {
                    case 'button':
                        element = document.createElement( 'button' );
                        element.textContent = greeting;
                        element.style.width = elemenWidth + 'px';
                        element.style.height = elemenHeight + 'px';
                        break;
                    case 'progress':
                        element = document.createElement( 'progress' );
                        element.style.width = elemenWidth + 'px';
                        element.style.height = elemenHeight + 'px';
                        if( Math.random() > 0.5 ) {
                            element.setAttribute( 'max', '100' );
                            element.setAttribute( 'value', Math.round( Math.random() * 100 ) );
                        }
                        break;
                    case 'select':
                        element = document.createElement( 'select' );
                        element.setAttribute( 'selected', greeting );
                        element.innerHTML = '<option>' + greetings.join( '</option><option>' ) + '</option>';
                        element.style.width = elemenWidth + 'px';
                        element.style.height = elemenHeight + 'px';
                        break;
                    case 'meter':
                        element = document.createElement( 'meter' );
                        element.setAttribute( 'min', '0' );
                        element.setAttribute( 'max', '100' );
                        element.setAttribute( 'value', Math.round( Math.random() * 100 ) );
                        element.style.width = elemenWidth + 'px';
                        element.style.height = elemenHeight + 'px';
                        break;
                    case 'radio':
                        element = document.createElement( 'input' );
                        element.setAttribute( 'type', 'radio' );
                        if( Math.random() > 0.5 ) element.setAttribute( 'checked', '' );
                        break;
                    case 'checkbox':
                        element = document.createElement( 'input' );
                        element.setAttribute( 'type', 'checkbox' );
                        if( Math.random() > 0.5 ) element.setAttribute( 'checked', '' );
                        break;
                    case 'text':
                    default:
                        element = document.createElement( 'input' );
                        element.setAttribute( 'type', 'text' );
                        element.setAttribute( 'value', greeting );
                        element.style.width = elemenWidth + 'px';
                        element.style.height = elemenHeight + 'px';
                        element.style.outline = 'none';
                }

                transform( element, 'translate3d('+x+'px, '+y+'px, 0px) rotateX('+rx+'deg) rotateY('+ry+'deg) rotateZ('+rz+'deg)' );

                tree.appendChild( element );
            }

            var sphere = document.createElement( 'figure' );
            sphere.setAttribute( 'class', 'sphere' );
            tree.appendChild(sphere);

            // The snow
            for( var i = 0; i < 120; i++ ) {
                var element = document.createElement( 'input' );
                element.setAttribute( 'type', 'radio' );

                var spread = width * 4;

                var x = Math.round( Math.random() * spread ) - ( spread / 4 ),
                        y = Math.round( Math.random() * height ),
                        z = Math.round( Math.random() * spread ) - ( spread / 2 );

                var rx = 0,
                        ry = Math.random() * 360,
                        rz = 0;



                transform( element, 'translate3d('+x+'px, '+y+'px, '+z+'px) rotateX('+rx+'deg) rotateY('+ry+'deg) rotateZ('+rz+'deg)' );

                tree.appendChild( element );
            }

            function resize() {
                tree.style.top = ( ( window.innerHeight - height - 20 ) / 2 ) + 'px';
            }

            resize();

        })()

        }
    </script>

  </head>
  <body>

  <div class="presentsonly moveright">
      <ul class="presents presents-left">
          <li></li><li><li><li></li><li></li>
      </ul>
      <ul class="presents presents-right">
          <li></li><li><li><li></li><li></li>
      </ul>
  </div>

  <div class="presentsonly moveleft">
      <ul class="presents presents-left">
          <li></li><li><li><li></li><li></li>
      </ul>
      <ul class="presents presents-right">
          <li></li><li><li><li></li><li></li>
      </ul>
  </div>

  <div class="presentsonly moverightmore">
      <ul class="presents presents-left">
          <li></li><li><li><li></li><li></li>
      </ul>
      <ul class="presents presents-right">
          <li></li><li><li><li></li><li></li>
      </ul>
  </div>

  <div class="presentsonly">
      <ul class="presents presents-left">
          <li></li><li><li><li></li><li></li>
      </ul>
      <ul class="presents presents-right">
          <li></li><li><li><li></li><li></li>
      </ul>
  </div>


  <div class="tree"></div>

  <div class="santa">
      <div class="santa-body"></div>
      <div class="santa-hatbottom"></div>
      <div class="santa-eye eye-left"></div>
      <div class="santa-eye eye-right"></div>
      <div class="santa-face"></div>
      <div class="santa-beard"></div>
      <div class="santa-features"></div>
      <div class="santa-arm arm-left"></div>
      <ul class="presents presents-left">
          <li></li><li><li><li></li><li></li>
      </ul>
      <div class="santa-arm arm-right"></div>
      <ul class="presents presents-right">
          <li></li><li><li><li></li><li></li>
      </ul>
      <div class="dot"></div>
      <div class="present-bows"></div>
      <div class="santa-belt"></div>
      <div class="santa-legs"></div>
      <div class="shadow"></div>
  </div>

  <div class="col-xs-3"></div>
  <div id="main" class="col-xs-6">

      <div class="progress hide">
          <div class="progress-bar" role="progressbar" aria-valuenow="<%= amount%>"
               aria-valuemin="0" aria-valuemax="100" style="width:<%= amount%>%">
              $<%= raised%>
          </div>
      </div>

      <form class="hide" action="/charge" method="POST">
          <input>
          <script
                  src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                  data-key="pk_test_qbmOpj6hNdHw1iQgpBCgTTGU"
                  data-name="Chip In..."
                  data-currency="aud"
                  data-amount="2000"
                  data-locale="auto"
                  data-label="Chip In!">
          </script>
      </form>


  </div>

  </body>
</html>
